(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{182:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this.$createElement;this._self._c;return this._m(0)}),[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"一、git-commit-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、git-commit-规范"}},[s._v("#")]),s._v(" 一、Git commit 规范")]),s._v(" "),a("p",[s._v("团队合作的时候，经常会碰到各种随意的 commit message：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/engineering/demo.jpeg",alt:""}})]),s._v(" "),a("p",[s._v("统一 commit message 的好处：")]),s._v(" "),a("ul",[a("li",[s._v("可读性好，方便快速浏览，方便 Code Review")]),s._v(" "),a("li",[s._v("提高项目的整体质量")])]),s._v(" "),a("p",[s._v("业内规范：")]),s._v(" "),a("p",[s._v("Angular commit message规范 由 Google 推出的一套提交消息规范标准，也是目前使用范围最广的规范，前前端框架 Angular.js 采用的就是该规范。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("格式：type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" subject\n\nscope 指 commit 的范围（哪些模块进行了修改），可选\n\nsubject 指 commit 的简短描述，不超过"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("个字符，推荐以动词开头，如： 设置、修改、增加、删减、撤销等。\n\ntype 指当前 commit 类型，一般有下面几种可选类型：\n\nfeat"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 新功能\n\nfix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 修复bug\n\nmerge"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 合并代码\n\nrevert"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 撤销上一次的commit\n\nchore"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 构建工具或构建过程等的变动，如：gulp 换成了 webpack，webpack 升级等\n\nstyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 代码格式改变\n\ndocs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 文档修改\n\ntest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 增加测试代码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[s._v("Git log 提交信息过滤："),a("code",[s._v("git log --grep <regexp>")])]),s._v(" "),a("h2",{attrs:{id:"二、git-commit-规范校验：husky-commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、git-commit-规范校验：husky-commitlint"}},[s._v("#")]),s._v(" 二、Git commit 规范校验：husky + commitlint")]),s._v(" "),a("p",[s._v("husky 是一个 Git Hook 工具，能够实现提交前 eslint 校验和 commit 校验。")]),s._v(" "),a("p",[s._v("commitlint 用于检查您的提交消息是否符合规定提交格式，一般和 husky 包一起使用，用于对 git commit 信息的格式进行校验，当 commit 信息不符合规定格式的情况下将会抛出错误。")]),s._v(" "),a("p",[s._v("commitlint 的默认格式与 Angular 规范一致。")]),s._v(" "),a("p",[s._v("开始配置:")]),s._v(" "),a("h4",{attrs:{id:"步骤一：安装-husky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤一：安装-husky"}},[s._v("#")]),s._v(" 步骤一：安装 husky")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install husky --save-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"步骤二：安装-commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤二：安装-commitlint"}},[s._v("#")]),s._v(" 步骤二：安装 commitlint")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install --save-dev @commitlint/{cli,config-conventional}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"步骤三：修改-package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤三：修改-package-json"}},[s._v("#")]),s._v(" 步骤三：修改 package.json")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commit-msg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"commitlint -E HUSKY_GIT_PARAMS"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"步骤四：添加-commitlint-config-js-配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤四：添加-commitlint-config-js-配置文件"}},[s._v("#")]),s._v(" 步骤四：添加 commitlint.config.js  配置文件")]),s._v(" "),a("p",[s._v("项目根目录下创建 commitlint.config.js 文件，配置如下：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@commitlint/config-conventional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type-enum'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'always'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'feat'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chore'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'revert'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'merge'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'type-case': [0],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'type-empty': [0],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'scope-empty': [0],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'scope-case': [0],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'subject-full-stop': [0, 'never'],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'subject-case': [0, 'never'],")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'header-max-length': [0, 'always', 72]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("配置说明: 规则由键值和配置数组组成，如：'name: [0, 'always', 72]'")]),s._v(" "),a("p",[s._v("第一位是 level 等级，可选 0（禁用）1（警告）2 （错误）")]),s._v(" "),a("p",[s._v("第二位为该规则是否被应用，可选 always | never")]),s._v(" "),a("p",[s._v("第三位为该规则允许值")]),s._v(" "),a("p",[s._v("配置完成，可以试一下提交了，")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/engineering/example.png",alt:""}})]),s._v(" "),a("p",[s._v("如上图所示，commit 信息是 updateadf，不符合我们的规范，就会报错。")])])}],!1,null,null,null);t.default=e.exports}}]);